syntax = "proto3";

package common.v1;

import "google/protobuf/timestamp.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/any.proto";

option go_package = "github.com/vitalstream/protos/common/v1;commonv1";
option java_package = "com.vitalstream.common.v1";
option java_multiple_files = true;

// Pagination request
message PaginationRequest {
  int32 page = 1;
  int32 page_size = 2;
  string sort_by = 3;
  string sort_order = 4; // asc, desc
  string cursor = 5; // For cursor-based pagination
  bool include_total_count = 6;
  int32 offset = 7;
  int32 limit = 8;
}

// Pagination response
message PaginationResponse {
  int32 current_page = 1;
  int32 page_size = 2;
  int32 total_pages = 3;
  int32 total_count = 4;
  bool has_next = 5;
  bool has_previous = 6;
  string next_cursor = 7;
  string previous_cursor = 8;
  int32 offset = 9;
  int32 limit = 10;
}

// Page info for cursor-based pagination
message PageInfo {
  bool has_next_page = 1;
  bool has_previous_page = 2;
  string start_cursor = 3;
  string end_cursor = 4;
  int32 total_count = 5;
}

// Edge for cursor-based pagination
message Edge {
  string cursor = 1;
  google.protobuf.Any node = 2;
}

// Connection for cursor-based pagination
message Connection {
  PageInfo page_info = 1;
  repeated Edge edges = 2;
}

// Sort option
message SortOption {
  string field = 1;
  enum Direction {
    DIRECTION_UNSPECIFIED = 0;
    DIRECTION_ASC = 1;
    DIRECTION_DESC = 2;
  }
  Direction direction = 2;
}

// Filter option
message FilterOption {
  string field = 1;
  enum Operator {
    OPERATOR_UNSPECIFIED = 0;
    OPERATOR_EQUALS = 1;
    OPERATOR_NOT_EQUALS = 2;
    OPERATOR_GREATER_THAN = 3;
    OPERATOR_GREATER_THAN_OR_EQUAL = 4;
    OPERATOR_LESS_THAN = 5;
    OPERATOR_LESS_THAN_OR_EQUAL = 6;
    OPERATOR_IN = 7;
    OPERATOR_NOT_IN = 8;
    OPERATOR_CONTAINS = 9;
    OPERATOR_NOT_CONTAINS = 10;
    OPERATOR_STARTS_WITH = 11;
    OPERATOR_ENDS_WITH = 12;
    OPERATOR_IS_NULL = 13;
    OPERATOR_IS_NOT_NULL = 14;
    OPERATOR_BETWEEN = 15;
    OPERATOR_NOT_BETWEEN = 16;
  }
  Operator operator = 2;
  repeated string values = 3;
}

// Search filter
message SearchFilter {
  repeated FilterOption filters = 1;
  enum Logic {
    LOGIC_UNSPECIFIED = 0;
    LOGIC_AND = 1;
    LOGIC_OR = 2;
  }
  Logic logic = 2;
}

// Range filter
message RangeFilter {
  string field = 1;
  oneof range {
    NumericRange numeric_range = 2;
    IntegerRange integer_range = 3;
    TimestampRange timestamp_range = 4;
    DurationRange duration_range = 5;
  }
}

// Numeric range
message NumericRange {
  double min = 1;
  double max = 2;
  bool include_min = 3;
  bool include_max = 4;
}

// Integer range
message IntegerRange {
  int32 min = 1;
  int32 max = 2;
  bool include_min = 3;
  bool include_max = 4;
}

// Timestamp range
message TimestampRange {
  google.protobuf.Timestamp min = 1;
  google.protobuf.Timestamp max = 2;
  bool include_min = 3;
  bool include_max = 4;
}

// Duration range
message DurationRange {
  google.protobuf.Duration min = 1;
  google.protobuf.Duration max = 2;
  bool include_min = 3;
  bool include_max = 4;
}
